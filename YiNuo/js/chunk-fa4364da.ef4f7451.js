(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa4364da"],{"184a":function(e,t,a){},"764f":function(e,t,a){"use strict";var n=a("184a"),i=a.n(n);i.a},"9d6d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"expenditure_receive"},[a("header",{staticClass:"mui-bar mui-bar-nav"},[a("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"expenditure"}}}),a("h1",{staticClass:"mui-title"},[e._v("转为应收")]),a("router-link",{staticClass:"mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"}}})],1),a("login-loading",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl_loading,expression:"imgUrl_loading"}]}),e._m(0),a("div",{staticClass:"mui-content app"},[a("form",{staticClass:"mui-input-group"},[e.site_various?a("div",{staticClass:"mui-input-row site_projet"},[a("label",[e._v("工地名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customer_name,expression:"customer_name"}],attrs:{type:"text",placeholder:"请输入工地名称"},domProps:{value:e.customer_name},on:{keyup:function(t){return e.siteWhite(e.customer_name)},input:function(t){t.target.composing||(e.customer_name=t.target.value)}}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.isshow,expression:"isshow"}],staticClass:"mui-table-view"},e._l(e.site_projet_name_search,(function(t,n){return a("li",{key:n,staticClass:"mui-table-view-cell",on:{click:function(a){return e.siteItem(t.customer_name,t.customer_id)}}},[e._v(e._s(t.customer_name))])})),0)]):e._e(),e.relevant_people?a("div",{staticClass:"mui-input-row"},[a("label",[e._v("债务人")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_debtor,expression:"fund_debtor"}],attrs:{type:"text",placeholder:"请输入债务人"},domProps:{value:e.fund_debtor},on:{keyup:function(t){return e.listRelevantWhite(e.fund_debtor)},input:function(t){t.target.composing||(e.fund_debtor=t.target.value)}}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.releshow,expression:"releshow"}],staticClass:"mui-table-view"},e._l(e.relelist,(function(t,n){return a("li",{key:n,staticClass:"mui-table-view-cell",on:{click:function(a){return e.releItem(t.fund_person,t.fund_person_id)}}},[e._v(e._s(t.fund_person))])})),0)]):e._e(),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("类别选择")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.fund_nameo,expression:"fund_nameo"}],class:{select:""===e.fund_nameo,selectBlack:""!==e.fund_nameo},attrs:{name:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.fund_nameo=t.target.multiple?a:a[0]},function(t){return e.fund_namesa(e.fund_nameo)}]}},[a("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.list_fund_name_type,(function(t){return a("option",{domProps:{value:t.fund_name_type}},[e._v(e._s(t.fund_name_type))])}))],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("类别名称")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.list_fund_namea,expression:"list_fund_namea"}],class:{select:""===e.list_fund_namea,selectBlack:""!==e.list_fund_namea},attrs:{name:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.list_fund_namea=t.target.multiple?a:a[0]},function(t){return e.list_fund_nameas(e.list_fund_namea)}]}},[a("option",{attrs:{value:"",selected:"selected"}},[e._v("请选择")]),e._l(e.list_fund_names,(function(t){return e.cotrProjet?a("option",{domProps:{value:t.fund_names}},[e._v(e._s(t.fund_names))]):e._e()})),e._l(e.list_fund_names,(function(t){return e.idProjet?a("option",{domProps:{value:t.fund_name_id}},[e._v(e._s(t.fund_names))]):e._e()}))],2)]),e.category?a("div",{staticClass:"mui-input-row"},[a("label",[e._v("类别详情")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.all_rate,expression:"all_rate"}],class:{select:""===e.all_rate,selectBlack:""!==e.all_rate},attrs:{name:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.all_rate=t.target.multiple?a:a[0]},function(t){return e.all_rate_name(e.all_rate)}]}},[a("option",{attrs:{value:"",selected:"selected"}},[e._v("请选择")]),e._l(e.list_fund_name,(function(t){return a("option",{domProps:{value:t.fund_name_id}},[e._v(e._s(t.fund_name))])}))],2)]):e._e(),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("级别")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.level,expression:"level"}],class:{select:""===e.level,selectBlack:""!==e.level},attrs:{name:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.level=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.list_lev,(function(t){return a("option",{domProps:{value:t.text}},[e._v(e._s(t.text))])}))],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("情况")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.whether,expression:"whether"}],class:{select:""===e.whether,selectBlack:""!==e.whether},attrs:{name:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.whether=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.list_whether,(function(t){return a("option",{domProps:{value:t.text}},[e._v(e._s(t.text))])}))],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("总金额")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_money,expression:"fund_money"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"￥"},domProps:{value:e.fund_money},on:{input:function(t){t.target.composing||(e.fund_money=t.target.value)}}})]),a("div",{staticClass:"mui-input-row input-radio"},[a("div",{staticClass:"mui-input-row mui-left mui-radio"},[a("label",[e._v("阶段付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_type,expression:"fund_type"}],attrs:{type:"radio",value:"阶段付款"},domProps:{checked:e._q(e.fund_type,"阶段付款")},on:{click:e.stage_one,change:function(t){e.fund_type="阶段付款"}}})]),a("div",{staticClass:"mui-input-row mui-left mui-radio"},[a("label",[e._v("周期付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_type,expression:"fund_type"}],attrs:{type:"radio",value:"周期付款"},domProps:{checked:e._q(e.fund_type,"周期付款")},on:{click:e.week,change:function(t){e.fund_type="周期付款"}}})])]),a("table",{staticClass:"table-all",attrs:{border:"0",id:"table"}},[a("tr",[a("th",[e._v("预收日期")]),a("th",[e._v("批次")]),a("th",{style:e.padLeft},[e._v("金额")]),a("th",[e._v("备注")])]),e._l(e.list,(function(t){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_details_date,expression:"item.fund_details_date"}],style:e.paRight,attrs:{type:"date",id:"fund_details_date"},domProps:{value:t.fund_details_date},on:{input:function(a){a.target.composing||e.$set(t,"fund_details_date",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_details_batch,expression:"item.fund_details_batch"}],attrs:{type:"text",id:"fund_details_batch",placeholder:"批次"},domProps:{value:t.fund_details_batch},on:{input:function(a){a.target.composing||e.$set(t,"fund_details_batch",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_details_money,expression:"item.fund_details_money"}],style:e.padLeft,attrs:{type:"text",id:"fund_details_money",placeholder:"￥"},domProps:{value:t.fund_details_money},on:{input:function(a){a.target.composing||e.$set(t,"fund_details_money",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_details_text,expression:"item.fund_details_text"}],attrs:{type:"text",id:"fund_details_text",placeholder:"备注"},domProps:{value:t.fund_details_text},on:{input:function(a){a.target.composing||e.$set(t,"fund_details_text",a.target.value)}}})])])}))],2)]),a("div",{staticClass:"mui-content data-time",attrs:{id:"data-time"}},[a("form",{staticClass:"mui-input-group"},[a("div",{staticClass:"mui-input-row"},[a("label",[e._v("还款时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.data_huan,expression:"data_huan"}],staticClass:"mui-input-clear",attrs:{type:"date",id:"data_huan"},domProps:{value:e.data_huan},on:{input:function(t){t.target.composing||(e.data_huan=t.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("还款周期")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.yue,expression:"yue"}],attrs:{name:"",id:"yue"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.yue=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("请选择")]),a("option",{attrs:{value:"按月"}},[e._v("按月")]),a("option",{attrs:{value:"按年"}},[e._v("按年")]),a("option",{attrs:{value:"按周"}},[e._v("按周")])])]),a("div",{staticClass:"mui-input-row"},[a("label",[e._v("还款期数")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.qi,expression:"qi"}],staticClass:"mui-input-clear",attrs:{type:"text",id:"qi",placeholder:"请填入期数"},domProps:{value:e.qi},on:{input:function(t){t.target.composing||(e.qi=t.target.value)}}})])])]),a("p",{attrs:{id:"btn-form"},on:{click:e.formAdd}},[e._v("添加新一行")]),a("p",{attrs:{id:"btn-del"},on:{click:function(t){return e.del(e.user)}}},[e._v("删除")]),a("button-save",{nativeOn:{click:function(t){return e.add(t)}}})],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mui-content"},[a("div",{staticClass:"customer"},[a("h2",[e._v("转为应收")]),a("p",[e._v("/expenditur receive")])])])}],s={name:"expenditure_receive",data(){return{imgUrl_loading:!1,user:"",all_rate:"",all_id:"",category:!0,relevant_people:!0,cotrProjet:!1,idProjet:!0,site_various:!0,level:"",whether:"",list_lev:[{text:"A"},{text:"B"},{text:"C"}],list_whether:[{text:"是"},{text:"否"}],fund_type:"阶段付款",list_fund_name_type:"",fund_nameo:"",fund_debtor:"",fund_debtor_id:"",fund_money:"",list_fund_debtor:[{text:"胡永生"},{text:"邱梅"}],fund_person:"",fund_text:"0",list_fund_names:"",list_fund_namea:"",list_fund_name:"",customer_name:"",customer_name_id:"",list_customer_name:"",data_huan:"",fund_name:"",yue:"",qi:"",site_projet_name:"",site_projet_name_search:[],relefor:"",relelist:[],releshow:!1,test_id:"",isshow:!1,list:[{fund_details_date:"",fund_details_batch:"1".toString(),fund_details_money:"",fund_details_text:""}],batch_index:1,list_list:[],padLeft:{padding:"0"},paRight:{paddingRight:"0"}}},methods:{formAdd(){this.batch_index++;var e={fund_details_date:"",fund_details_money:"",fund_details_batch:"1",fund_details_text:""};e.fund_details_batch=this.batch_index.toString(),this.list.push(e)},del(e){0===this.list.length?mui.alert("没有可删除的了"):this.list.splice(this.list.indexOf(e),1)},fund_namesa(e){this.fund_nameso=e,this.axios.get("/fund/Select_three_fund_name?fund_type=0&fund_name_type="+this.fund_nameso).then(e=>{this.list_fund_name_type=e.data.fund_name_type,this.list_fund_names=e.data.fund_names,this.list_fund_name=e.data.fund_name,"个人"===this.fund_nameo?(this.category=!1,this.site_various=!1):"公司"===this.fund_nameo&&(this.category=!0,this.cotrProjet=!0,this.idProjet=!1,this.site_various=!0)})},list_fund_nameas(e){this.fund_name=e,this.axios.get("/fund/Select_three_fund_name?fund_type=0&fund_name_type="+this.fund_nameso+"&fund_names="+e).then(e=>{this.list_fund_name_type=e.data.fund_name_type,this.list_fund_names=e.data.fund_names,this.list_fund_name=e.data.fund_name,"外借款"===this.fund_name?(this.site_various=!1,this.relevant_people=!0):"工程"===this.fund_name&&(this.relevant_people=!0,this.site_various=!0)})},all_rate_name(e){this.all_id=e,this.axios.get("/fund/Select_three_fund_name?fund_type=0&fund_name_type="+this.fund_nameso+"&fund_names="+this.fund_name).then(e=>{this.list_fund_name_type=e.data.fund_name_type,this.list_fund_names=e.data.fund_names,this.list_fund_name=e.data.fund_name})},siteItem(e,t){this.customer_name=e,this.customer_name_id=t,this.isshow=!1},releItem(e,t){this.fund_debtor=e,this.fund_debtor_id=t,this.releshow=!1},siteData(){this.axios.get("/SelectAllCustomer?Customer_A=1&Customer_B=2&Customer_C=3&Customer_D=4").then(e=>{200===e.status&&(this.site_projet_name=e.data.data)})},person_all(){this.axios.get("/fund/Select_fund_person?fund_person_state_A=1").then(e=>{200===e.status&&(this.relefor=e.data.data)})},siteWhite(e){if(0==e.length)this.isshow=!1;else{this.isshow=!0;var t=this,a=[];""!=this.site_projet_name&&(this.site_projet_name.map((function(e){-1!=e.customer_name.search(t.customer_name)&&a.push(e)})),this.site_projet_name_search=a)}},listRelevantWhite(e){if(0==e.length)this.releshow=!1;else{this.releshow=!0;var t=this,a=[];""!=this.relefor&&(this.relefor.map((function(e){-1!=e.fund_person.search(t.fund_debtor)&&a.push(e)})),this.relelist=a)}},stage_one(){var e=document.getElementById("table"),t=document.getElementById("data-time"),a=document.getElementById("btn-form"),n=document.getElementById("btn-del");a.style.display="block",e.style.display="block",n.style.display="block",t.style.display="none"},week(){var e=document.getElementById("table"),t=document.getElementById("data-time"),a=document.getElementById("btn-form"),n=document.getElementById("btn-del");n.style.display="none",e.style.display="none",a.style.display="none",t.style.display="block"},siteChange(){var e="expenditure_receive";this.$router.push({path:"siteList"}),window.expenditure=e},relecantProsen(){var e="expenditure_receive";this.$router.push({path:"relevant_people"}),window.prosen=e},add(){var e=this,t=/^[0-9]*$/,a=/^\d+(\.\d+)?$/;if(""==this.fund_nameo)return mui.toast("类别选择不能为空"),!1,!1;if(""==this.list_fund_namea)return mui.toast("类别详情不能为空"),!1,!1;if(""==this.level)return mui.toast("级别不能为空"),!1,!1;if(""==this.whether)return mui.toast("情况不能为空"),!1,!1;if(""==this.fund_money)return mui.toast("总金额不能为空"),!1,!1;if(!a.test(this.fund_money))return mui.toast("总金额只能填入数字"),!1,!1;if("阶段付款"===this.fund_type){document.getElementById("fund_details_date").value;var n=document.getElementById("fund_details_money").value,i=document.getElementById("fund_details_batch").value;if(""==n)return mui.toast("金额不能为空"),!1,!1;if(!a.test(n))return mui.toast("金额只能填入数字"),!1,!1;if(""==i)return mui.toast("批次不能为空"),!1,!1;if(!t.test(i))return mui.toast("批次只能填入数字"),!1,!1;for(var s in this.list){if(""==this.list[s].fund_details_batch)return mui.toast("批次不能为空"),!1,!1;if(!t.test(this.list[s].fund_details_batch))return mui.toast("批次内容只能为数字"),!1,!1;if(""==this.list[s].fund_details_money)return mui.toast("金额不能为空"),!1,!1;if(!a.test(this.list[s].fund_details_money))return mui.toast("金额只能为数字"),!1,!1}var u=0;for(var s in this.list){var l=this.list[s].fund_details_money;u+=parseFloat(l)}if(!(this.fund_money>=u))return mui.toast("金额的和不能大于总金额"),!1,!1;var r=0;for(var s in this.list)r+=parseFloat(this.list[s].fund_details_money);if(this.fund_money!=r)return mui.toast("总金额与阶段金额总和不同"),!1,!1}else if("周期付款"===this.fund_type){var d=document.getElementById("qi").value,o=document.getElementById("yue").value,_=document.getElementById("data_huan").value;if(""==_)return mui.toast("还款时间不能为空"),!1,!1;if(""==o)return mui.toast("还款周期不能为空"),!1,!1;if(""==d)return mui.toast("还款期数不能为空"),!1,!1;if(!t.test(d))return mui.toast("还款期数只能填入数字"),!1,!1}_=new Date(this.data_huan);var m=this.yue,f=this.qi,c=this.fund_money/f,p="";if("周期付款"===this.fund_type)if(this.list=[],"按月"===m)for(var h=1;h<=f;h++){var v=_.getMonth()+1+h;p=_.getFullYear()+"-"+v+"-"+_.getDate();var y={fund_details_date:p,fund_details_money:c.toString(),fund_details_batch:h.toString(),fund_details_text:""};this.list.push(y)}else if("按年"===m)for(h=1;h<=f;h++){var g=_.getFullYear()+h;p=g+"-"+_.getMonth()+"-"+_.getDate();y={fund_details_date:p,fund_details_money:c.toString(),fund_details_batch:h.toString(),fund_details_text:""};this.list.push(y)}else if("按周"===m)for(h=1;h<=f;h++){v=_.getMonth()+1;_.setDate(_.getDate()+7),p=_.getFullYear()+"-"+v+"-"+_.getDate();y={fund_details_date:p,fund_details_money:c.toString(),fund_details_batch:h.toString(),fund_details_text:""};this.list.push(y)}var w="",b="",x="",C="";"个人"===this.fund_nameo?(w=this.list_fund_namea,x+=this.fund_debtor_id,b+="0"):"公司"===this.fund_nameo&&(w=this.all_rate,void 0===this.customer_name?b+="0":b+=this.customer_name_id,void 0===this.fund_debtor?x+="0":x+=this.fund_debtor_id),"是"===this.whether?C+="0":C+="1",this.imgUrl_loading=!0,this.axios({method:"POST",url:"/fund/Add_Fund",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:{listFund:JSON.stringify(this.list),fund_customer_id:b,fund_workyard_pact_id:1,fund_name:w,fund_money:this.fund_money,fund_person:x,fund_text:this.fund_text,fund_type:this.fund_type,fund_details_level:this.level,fund_details_type:C},transformRequest:[function(e){let t="";for(let a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}]}).then(t=>{200===t.status&&(this.imgUrl_loading=!1,mui.alert(t.data,(function(){e.$router.push({path:"money_receivable"})})))})}},created(){this.siteData(),this.person_all();var e=location.href,t=e.length,a=e.indexOf("="),n=decodeURI(e.substr(a+1,t-a));this.fund_details_id=n,this.lista=n.split("=");var i=[];for(var s in this.lista){var u=this.lista[s].slice(0);i.push(u)}this.moneys=i[0],this.axios.get("/fund/Select_three_fund_name?fund_type=1").then(e=>{this.list_fund_name_type=e.data.fund_name_type})}},u=s,l=(a("764f"),a("6691")),r=Object(l["a"])(u,n,i,!1,null,"2be3fc41",null);t["default"]=r.exports}}]);