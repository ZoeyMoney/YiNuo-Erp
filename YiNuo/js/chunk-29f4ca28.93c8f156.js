(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29f4ca28"],{"43a2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accounts_payable"},[a("header",{staticClass:"mui-bar mui-bar-nav"},[a("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"payable_money"},href:"payable_money.html"}}),a("h1",{staticClass:"mui-title"},[t._v("应付款录入")]),a("router-link",{staticClass:"mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"},href:"souye.html"}})],1),a("login-loading",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl_loading,expression:"imgUrl_loading"}]}),t._m(0),a("div",{staticClass:"mui-content app"},[a("form",{staticClass:"mui-input-group"},[t.site_various?a("div",{staticClass:"mui-input-row site_projet"},[a("label",[t._v("工地名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_name,expression:"customer_name"}],attrs:{type:"text",placeholder:"请输入工地名称"},domProps:{value:t.customer_name},on:{keyup:function(e){return t.siteWhite(t.customer_name)},input:function(e){e.target.composing||(t.customer_name=e.target.value)}}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"mui-table-view"},t._l(t.site_projet_name_search,function(e,n){return a("li",{key:n,staticClass:"mui-table-view-cell",on:{click:function(a){return t.siteItem(e.customer_name,e.customer_id)}}},[t._v(t._s(e.customer_name))])}),0)]):t._e(),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("债权人")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_person,expression:"fund_person"}],attrs:{type:"text",placeholder:"请输入债权人"},domProps:{value:t.fund_person},on:{keyup:function(e){return t.listRelevantWhite(t.fund_person)},input:function(e){e.target.composing||(t.fund_person=e.target.value)}}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.releshow,expression:"releshow"}],staticClass:"mui-table-view"},t._l(t.relelist,function(e,n){return a("li",{key:n,staticClass:"mui-table-view-cell",on:{click:function(a){return t.releItem(e.fund_person,e.fund_person_id)}}},[t._v(t._s(e.fund_person))])}),0)]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("经手人")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hand_man,expression:"hand_man"}],attrs:{type:"text",placeholder:"请输入经手人"},domProps:{value:t.hand_man},on:{keyup:function(e){return t.huandKeyup(t.hand_man)},input:function(e){e.target.composing||(t.hand_man=e.target.value)}}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.huanShow,expression:"huanShow"}],staticClass:"mui-table-view"},t._l(t.huan_list_list,function(e,n){return a("li",{key:n,staticClass:"mui-table-view-cell",on:{click:function(a){return t.huanItem(e.fund_person,e.fund_person_id)}}},[t._v(t._s(e.fund_person))])}),0)]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("类别选择")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.fund_nameo,expression:"fund_nameo"}],class:{select:""===t.fund_nameo,selectBlack:""!==t.fund_nameo},attrs:{name:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.fund_nameo=e.target.multiple?a:a[0]},function(e){return t.fund_namesa(t.fund_nameo)}]}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.list_fund_name_type,function(e){return a("option",{domProps:{value:e.fund_name_type}},[t._v(t._s(e.fund_name_type))])})],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("类别名称")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.list_fund_namea,expression:"list_fund_namea"}],class:{select:""===t.list_fund_namea,selectBlack:""!==t.list_fund_namea},attrs:{name:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.list_fund_namea=e.target.multiple?a:a[0]},function(e){return t.list_fund_nameas(t.list_fund_namea)}]}},[a("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.list_fund_names,function(e){return t.cotrProjet?a("option",{domProps:{value:e.fund_names}},[t._v(t._s(e.fund_names))]):t._e()}),t._l(t.list_fund_names,function(e){return t.idProjet?a("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_names))]):t._e()})],2)]),t.category?a("div",{staticClass:"mui-input-row"},[a("label",[t._v("类别详情")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.all_rate,expression:"all_rate"}],class:{select:""===t.all_rate,selectBlack:""!==t.all_rate},attrs:{name:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.all_rate=e.target.multiple?a:a[0]},function(e){return t.all_rate_name(t.all_rate)}]}},[a("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.list_fund_name,function(e){return a("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_name))])})],2)]):t._e(),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("总金额")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_money,expression:"fund_money"}],staticClass:"mui-input-clear",attrs:{type:"text",id:"fund_money",placeholder:"￥"},domProps:{value:t.fund_money},on:{input:function(e){e.target.composing||(t.fund_money=e.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("级别")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.level,expression:"level"}],class:{select:""===t.level,selectBlack:""!==t.level},attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.level=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.list_lev,function(e){return a("option",{domProps:{value:e.text}},[t._v(t._s(e.text))])})],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("情况")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.whether,expression:"whether"}],class:{select:""===t.whether,selectBlack:""!==t.whether},attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.whether=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.list_whether,function(e){return a("option",{domProps:{value:e.text}},[t._v(t._s(e.text))])})],2)]),a("div",{staticClass:"mui-input-row input-radio"},[a("label",[t._v("日期")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dataValue1,callback:function(e){t.dataValue1=e},expression:"dataValue1"}})],1),a("div",{staticClass:"mui-input-row input-radio"},[a("div",{staticClass:"mui-input-row mui-left mui-radio"},[a("label",[t._v("阶段付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_type,expression:"fund_type"}],attrs:{type:"radio",value:"阶段付款"},domProps:{checked:t._q(t.fund_type,"阶段付款")},on:{click:t.stage_one,change:function(e){t.fund_type="阶段付款"}}})]),a("div",{staticClass:"mui-input-row mui-left mui-radio"},[a("label",[t._v("周期付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_type,expression:"fund_type"}],attrs:{type:"radio",value:"周期付款"},domProps:{checked:t._q(t.fund_type,"周期付款")},on:{click:t.week,change:function(e){t.fund_type="周期付款"}}})])]),a("table",{staticClass:"tables",attrs:{border:"0",id:"table"}},[a("tr",[a("th",[a("span",{style:t.paLft},[t._v("预收日期")])]),t._m(1),t._m(2),t._m(3)]),t._l(t.list,function(e,n){return a("tr",{key:n},[a("td",[a("span",{style:t.paLft},[a("el-date-picker",{attrs:{editable:!1,id:"fund_details_date",type:"date",placeholder:"选择日期"},model:{value:e.fund_details_date,callback:function(a){t.$set(e,"fund_details_date",a)},expression:"item.fund_details_date"}})],1)]),a("td",[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_batch,expression:"item.fund_details_batch"}],style:t.paR,attrs:{type:"text",placeholder:"批次",id:"fund_details_batch"},domProps:{value:e.fund_details_batch},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_batch",a.target.value)}}})])]),a("td",[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_money,expression:"item.fund_details_money"}],style:t.paR,attrs:{type:"text",id:"fund_details_money",placeholder:"￥"},domProps:{value:e.fund_details_money},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_money",a.target.value)}}})])]),a("td",[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_text,expression:"item.fund_details_text"}],style:t.paR,attrs:{type:"text",id:"fund_details_text",placeholder:"备注"},domProps:{value:e.fund_details_text},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_text",a.target.value)}}})])])])})],2),a("div",{staticClass:"mui-content data-time",attrs:{id:"data-time"}},[a("form",{staticClass:"mui-input-group"},[a("div",{staticClass:"mui-input-row"},[a("label",[t._v("还款时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data_huan,expression:"data_huan"}],staticClass:"mui-input-clear",attrs:{type:"date"},domProps:{value:t.data_huan},on:{input:function(e){e.target.composing||(t.data_huan=e.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("还款周期")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.yue,expression:"yue"}],attrs:{name:"",id:"yue"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.yue=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),a("option",{attrs:{value:"按月"}},[t._v("按月")]),a("option",{attrs:{value:"按年"}},[t._v("按年")]),a("option",{attrs:{value:"按周"}},[t._v("按周")])])]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("还款期数")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.qi,expression:"qi"}],staticClass:"mui-input-clear",attrs:{type:"text",id:"qi",placeholder:"请填入期数"},domProps:{value:t.qi},on:{input:function(e){e.target.composing||(t.qi=e.target.value)}}})])])]),a("p",{attrs:{id:"btn-form"},on:{click:t.formAdd}},[t._v("添加新一行")]),a("p",{attrs:{id:"btn-del"},on:{click:function(e){return t.del(t.user)}}},[t._v("删除")])]),a("div",{staticClass:"mui-input-row form-btn"},[a("button",{staticClass:"mui-btn mui-btn-blue",attrs:{type:"button",id:"btn"},on:{click:t.add}},[t._v("保存")])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-content"},[a("div",{staticClass:"customer"},[a("h2",[t._v("应付款录入")]),a("p",[t._v("/Accounts payable input")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",[a("span",[t._v("批次")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",[a("span",[t._v("金额")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",[a("span",[t._v("备注")])])}],s={name:"accounts_payable",data(){return{imgUrl_loading:!1,user:"",all_rate:"",dataValue1:(new Date).toString(),all_id:"",list_fund_names:"",category:!0,cotrProjet:!1,idProjet:!0,site_various:!0,fund_nameo:"",list_fund_namea:"",list_fund_name:"",list_customer_name:"",fund_money:"",fund_person:"",fund_person_id:"",fund_type:"阶段付款",customer_name:"",customer_name_id:"",data_huan:"",fund_text:"0",yue:"",qi:"",hand_man:"",level:"",whether:"",huan_man_id:"",site_projet_name:"",site_projet_name_search:[],relefor:"",relelist:[],releshow:!1,huand_list:"",huan_list_list:"",test_id:"",isshow:!1,huanShow:!1,list_lev:[{text:"A"},{text:"B"},{text:"C"}],list_whether:[{text:"是"},{text:"否"}],list_fund_name_type:"",batch_index:1,list:[{fund_details_date:"",fund_details_batch:"1",fund_details_money:"",fund_details_text:""}],paLft:{paddingLeft:"15px"},paR:{paddingLeft:"0"}}},methods:{formAdd(){this.batch_index++;var t={fund_details_date:"",fund_details_money:"",fund_details_batch:"1",fund_details_text:""};t.fund_details_batch=this.batch_index.toString(),this.list.push(t)},fund_namesa(t){this.fund_nameso=t,this.axios.get("/fund/Select_three_fund_name?fund_type=1&fund_name_type="+this.fund_nameso).then(t=>{this.list_fund_name_type=t.data.fund_name_type,this.list_fund_names=t.data.fund_names,this.list_fund_name=t.data.fund_name,"个人"===this.fund_nameo?(this.category=!1,this.site_various=!1):"公司"===this.fund_nameo&&(this.category=!0,this.cotrProjet=!0,this.idProjet=!1,this.site_various=!0)})},list_fund_nameas(t){this.fund_name=t,this.axios.get("/fund/Select_three_fund_name?fund_type=1&fund_name_type="+this.fund_nameso+"&fund_names="+t).then(t=>{this.list_fund_name_type=t.data.fund_name_type,this.list_fund_names=t.data.fund_names,this.list_fund_name=t.data.fund_name})},all_rate_name(t){this.all_id=t,this.axios.get("/fund/Select_three_fund_name?fund_type=1&fund_name_type="+this.fund_nameso+"&fund_names="+this.fund_name).then(t=>{this.list_fund_name_type=t.data.fund_name_type,this.list_fund_names=t.data.fund_names,this.list_fund_name=t.data.fund_name})},siteItem(t,e){this.customer_name=t,this.customer_name_id=e,this.isshow=!1},releItem(t,e){this.fund_person=t,this.fund_person_id=e,this.releshow=!1},huanItem(t,e){this.hand_man=t,this.huan_man_id=e,this.huanShow=!1},siteData(){this.axios.get("/SelectAllCustomer?Customer_A=1&Customer_B=2&Customer_C=3&Customer_D=4").then(t=>{200===t.status&&(this.site_projet_name=t.data.data)})},person_all(){this.axios.get("/fund/Select_fund_person?fund_person_state_A=1").then(t=>{200===t.status&&(this.relefor=t.data.data,this.huand_list=t.data.data)})},siteWhite(t){if(0==t.length)this.isshow=!1;else{this.isshow=!0;var e=this,a=[];""!=this.site_projet_name&&(this.site_projet_name.map(function(t){-1!=t.customer_name.search(e.customer_name)&&a.push(t)}),this.site_projet_name_search=a)}},listRelevantWhite(t){if(0==t.length)this.releshow=!1;else{this.releshow=!0;var e=this,a=[];""!=this.relefor&&(this.relefor.map(function(t){-1!=t.fund_person.search(e.fund_person)&&a.push(t)}),this.relelist=a)}},huandKeyup(t){if(0==t.length)this.huanShow=!1;else{this.huanShow=!0;var e=this,a=[];""!=this.huand_list&&(this.huand_list.map(function(t){-1!=t.fund_person.search(e.hand_man)&&a.push(t)}),this.huan_list_list=a)}},stage_one(){var t=document.getElementById("table"),e=document.getElementById("data-time"),a=document.getElementById("btn-form"),n=document.getElementById("btn-del");a.style.display="block",t.style.display="block",n.style.display="block",e.style.display="none"},week(){var t=document.getElementById("table"),e=document.getElementById("data-time"),a=document.getElementById("btn-form"),n=document.getElementById("btn-del");t.style.display="none",a.style.display="none",e.style.display="block",n.style.display="none"},del(t){this.batch_index--,0===this.list.length?mui.alert("没有可删除的了"):this.list.splice(this.list.indexOf(t),1)},add(){var t=this,e=/^[0-9]*$/,a=/^\d+(\.\d+)?$/;if(""==this.fund_name)return mui.toast("类别选择不能为空"),!1,!1;if(""==this.customer_id)return mui.toast("项目名称不能为空"),!1,!1;if(""==this.hand_man)return mui.toast("经手人不能为空"),!1,!1;if(""==this.level)return mui.toast("级别不能为空"),!1,!1;if(""==this.whether)return mui.toast("情况不能为空"),!1,!1;if(""==this.fund_money)return mui.toast("总金额不能为空"),!1,!1;if(!a.test(this.fund_money))return mui.toast("总金额只能填入数字"),!1,!1;if(""==this.dataValue1)return mui.toast("时间不能为空"),!1,!1;if("阶段付款"===this.fund_type){var n=document.getElementById("fund_details_money").value,i=document.getElementById("fund_details_batch").value;if(""==n)return mui.toast("金额不能为空"),!1,!1;if(!a.test(n))return mui.toast("金额只能填入数字"),!1,!1;if(""==i)return mui.toast("批次不能为空"),!1,!1;if(!e.test(i))return mui.toast("批次只能填入数字"),!1,!1;for(var s in this.list){if(""==this.list[s].fund_details_batch)return mui.toast("批次不能为空"),!1,!1;if(!e.test(this.list[s].fund_details_batch))return mui.toast("批次内容只能为数字"),!1,!1;if(""==this.list[s].fund_details_money)return mui.toast("金额不能为空"),!1,!1;if(!a.test(this.list[s].fund_details_money))return mui.toast("金额只能为数字"),!1,!1}var u=0;for(var s in this.list){var l=this.list[s].fund_details_money;u+=parseFloat(l)}if(!(this.fund_money>=u))return mui.toast("金额的和不能大于总金额"),!1,!1;var r=0;for(var s in this.list)r+=parseFloat(this.list[s].fund_details_money);if(this.fund_money!=r)return mui.toast("总金额与阶段金额总和不同"),!1,!1}else if("周期付款"===this.fund_type){if(""==this.yue)return mui.toast("还款周期不能为空"),!1,!1;if(""==this.qi)return mui.toast("还款期数不能为空"),!1,!1;if(!e.test(this.qi))return mui.toast("还款时间只能填入数字"),!1,!1}var o=-1*this.fund_money,d=new Date(this.data_huan),_=this.yue,m=this.qi,c=this.fund_money/m,f="";if("周期付款"===this.fund_type)if(this.list=[],"按月"===_)for(var p=0;p<=m-1;p++){var h=d.getMonth()+1+p;f=d.getFullYear()+"-"+h+"-"+d.getDate();var v={fund_details_date:f,fund_details_money:c.toString(),fund_details_batch:p.toString(),fund_details_text:""};this.list.push(v)}else if("按年"===_)for(p=0;p<=m-1;p++){var y=d.getFullYear()+p;h=d.getMonth()+1;f=y+"-"+h+"-"+d.getDate();v={fund_details_date:f,fund_details_money:c.toString(),fund_details_batch:p.toString(),fund_details_text:""};this.list.push(v)}else if("按周"===_)for(p=0;p<=m-1;p++){h=d.getMonth()+1;d.setDate(d.getDate()+7),f=d.getFullYear()+"-"+h+"-"+d.getDate();v={fund_details_date:f,fund_details_money:c.toString(),fund_details_batch:p.toString(),fund_details_text:""};this.list.push(v)}var g="",w="",b="",x="",C="";"个人"===this.fund_nameo?(g=this.list_fund_namea,b+=this.fund_person_id,w+="0"):"公司"===this.fund_nameo&&(g=this.all_rate,void 0!==this.customer_name?w+=this.customer_name_id:w+="0",void 0!==this.fund_person_id?b+=this.fund_person_id:b+="0"),""!==this.huan_man_id?x+=this.huan_man_id:x+="0","是"===this.whether?C+="0":C+="1",this.imgUrl_loading=!0,this.axios({method:"POST",url:"/fund/Add_Fund",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:{listFund:JSON.stringify(this.list),fund_customer_id:w,fund_workyard_pact_id:1,fund_debtor:x,fund_person:b,fund_name:g,fund_money:o,fund_text:this.fund_text,fund_type:this.fund_type,fund_details_level:this.level,fund_details_type:C},transformRequest:[function(t){let e="";for(let a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}]}).then(e=>{200===e.status&&(this.imgUrl_loading=!1,mui.alert(e.data,function(){t.$router.push({path:"payable_money"})}))})}},created(){this.siteData(),this.person_all(),this.axios.get("/fund/Select_three_fund_name?fund_type=1").then(t=>{this.list_fund_name_type=t.data.fund_name_type})}},u=s,l=(a("9d13"),a("2877")),r=Object(l["a"])(u,n,i,!1,null,"4321b76c",null);e["default"]=r.exports},8334:function(t,e,a){},"9d13":function(t,e,a){"use strict";var n=a("8334"),i=a.n(n);i.a}}]);