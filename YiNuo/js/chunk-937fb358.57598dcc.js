(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-937fb358"],{5973:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"payable_entry"},[i("header",{staticClass:"mui-bar mui-bar-nav"},[i("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"payable_money"}}}),i("h1",{staticClass:"mui-title"},[t._v("金额")]),i("router-link",{staticClass:"mui-action-back mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"}}})],1),i("login-loading",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl_loading,expression:"imgUrl_loading"}]}),t._m(0),i("div",{staticClass:"mui-content app"},[i("form",{staticClass:"mui-input-group"},[i("div",{staticClass:"mui-input-row"},[i("label",[t._v("工地名称")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.customer_name,expression:"customer_name"}],staticClass:"mui-input-clear",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.customer_name},on:{input:function(e){e.target.composing||(t.customer_name=e.target.value)}}})]),i("div",{staticClass:"mui-input-row"},[i("label",[t._v("相关人")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_person,expression:"fund_person"}],staticClass:"mui-input-clear",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.fund_person},on:{input:function(e){e.target.composing||(t.fund_person=e.target.value)}}})]),i("div",{staticClass:"mui-input-row"},[i("label",[t._v("预收时间")]),i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)]),i("form",{staticClass:"mui-input-group"},[i("div",{staticClass:"mui-input-row"},[i("label",[t._v("银行卡")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.fund_bank,expression:"fund_bank"}],attrs:{name:""},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.fund_bank=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.income_y,function(e){return i("option",{domProps:{value:e.bank_id}},[i("div",[t._v(t._s(e.bank_bank))]),i("div",[t._v(t._s(e.bank_person))]),i("div",[t._v("￥"+t._s(e.bank_money))])])})],2)]),i("div",{staticClass:"mui-input-row"},[i("label",[t._v("收款时间")]),i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.DateValue,callback:function(e){t.DateValue=e},expression:"DateValue"}})],1),i("div",{staticClass:"mui-input-row"},[i("label",[t._v("金额")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_details_money,expression:"fund_details_money"}],staticClass:"mui-input-clear",attrs:{type:"text"},domProps:{value:t.fund_details_money},on:{input:function(e){e.target.composing||(t.fund_details_money=e.target.value)}}})]),i("div",{staticClass:"mui-input-row"},[i("label",[t._v("实际转账")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.money,expression:"money"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入实际转账"},domProps:{value:t.money},on:{input:function(e){e.target.composing||(t.money=e.target.value)}}})]),i("div",{staticClass:"mui-input-row"},[i("label",[t._v("备注")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_details_text,expression:"fund_details_text"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入备注"},domProps:{value:t.fund_details_text},on:{input:function(e){e.target.composing||(t.fund_details_text=e.target.value)}}})])]),i("div",{staticClass:"mui-input-row mui-checkbox mui-left radio-one"},[i("label",[t._v("转为应付")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkBox,expression:"checkBox"}],attrs:{name:"checkbox1",type:"checkbox"},domProps:{checked:Array.isArray(t.checkBox)?t._i(t.checkBox,null)>-1:t.checkBox},on:{change:function(e){var i=t.checkBox,o=e.target,a=!!o.checked;if(Array.isArray(i)){var n=null,s=t._i(i,n);o.checked?s<0&&(t.checkBox=i.concat([n])):s>-1&&(t.checkBox=i.slice(0,s).concat(i.slice(s+1)))}else t.checkBox=a}}})]),i("div",{staticClass:"form-botton"},[i("button",{staticClass:"mui-btn mui-btn-black",attrs:{type:"button"},on:{click:t.update}},[t._v("修改")]),i("button",{staticClass:"mui-btn mui-btn-black",attrs:{type:"button"},on:{click:t.dele}},[t._v("删除")]),i("button",{staticClass:"mui-btn mui-btn-black",attrs:{type:"button"},on:{click:t.add}},[t._v("支出")])])])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mui-content"},[i("div",{staticClass:"customer"},[i("h2",[t._v("金额")]),i("p",[t._v("/Balance input")])])])}],n=i("d183"),s=i.n(n),u={name:"payable_entry",data(){return{imgUrl_loading:!1,projet:"",checkBox:"",money:"",funn_data:"",fund_details_id:"",fund_bank:"",income_y:"",fund_details_money:"",fund_details_text:"",DateValue:"",dates:""}},created(){console.log(JSON.parse(localStorage.payable_entry)),this.projet=JSON.parse(localStorage.payable_entry),this.customer_name=this.projet.customer_name,this.fund_person=this.projet.fund_person,this.fund_details_text=this.projet.fund_details_text,this.dates=this.projet.dates,this.fund_details_money=this.projet.fund_details_money,this.fund_details_id=this.projet.fund_details_id,this.axios.get(s.a.bankCard).then(t=>{this.income_y=t.data})},methods:{add(){var t=this,e=/^\d+(\.\d+)?$/;if(""==this.fund_bank)return mui.toast("银行卡不能为空"),!1,!1;if(""==this.DateValue)return mui.toast("收款时间不能为空"),!1,!1;if(""==this.money)return mui.toast("实际转账不能为空"),!1,!1;if(!e.test(this.money))return mui.toast("实际转账只能为纯数字"),!1,!1;this.imgUrl_loading=!0;var i=new Date(this.DateValue),o=i.getFullYear(),a=i.getMonth()+1,n=i.getDate(),u=i.getHours(),l=i.getMinutes(),r=i.getSeconds(),d=`${o}-${a}-${n} ${u}:${l}:${r}`,c="?fund_details_id="+this.fund_details_id+"&money="+this.money+"&fund_details_date="+d+"&bank_id="+this.fund_bank;if(!0===this.checkBox){var m=this.projet.fund_details_money,p=m-this.money,f=this.projet.customer_name,_=this.projet.fund_person,g=this.projet.fund_details_text,h=this.projet.dates,b=h.split(" ");this.axios.get(s.a.Update_fund_details+c).then(e=>{200===e.status?(this.imgUrl_loading=!1,t.$router.push({path:"payable_pay",query:{id:t.fund_details_id,money:p,cumoterName:f,person:_,text:g,datas:b}})):406===e.status&&mui.alert("数据异常")})}else this.axios.get(s.a.Update_fund_details+c).then(e=>{200===e.status?(this.imgUrl_loading=!1,"支付成功"===e.data.msg&&mui.alert("添加成功",function(){t.$router.push({name:"payable_money"})})):mui.alert("支付失败")})},dele(){var t=this;this.imgUrl_loading=!0,this.axios(s.a.Delete_fund_detail+"?fund_details_id="+this.fund_details_id).then(e=>{200===e.status&&(this.imgUrl_loading=!1,mui.alert(e.data.data,function(){t.$router.push({path:"payable_money"})}))})},update(){var t=this;this.imgUrl_loading=!0;var e=new Date(this.dates),i=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),n=e.getHours(),u=e.getMinutes(),l=e.getSeconds(),r=`${i}-${o}-${a} ${n}:${u}:${l}`;this.money=1+~this.money;var d="?fund_details_id="+this.fund_details_id+"&fund_id="+this.projet.fund_id+"&date="+r+"&text="+this.fund_details_text;this.fund_details_money!==this.projet.fund_details_money&&(d+="&money="+this.fund_details_money),this.axios.get(s.a.Update_fund_detail+d).then(e=>{200===e.status?(this.imgUrl_loading=!1,mui.alert(e.data.data,function(){t.$router.push({path:"payable_money"})})):406===e.status&&mui.alert("数据异常")})}}},l=u,r=(i("9b87"),i("2877")),d=Object(r["a"])(l,o,a,!1,null,"467be598",null);e["default"]=d.exports},"9b87":function(t,e,i){"use strict";var o=i("c4fc"),a=i.n(o);a.a},c4fc:function(t,e,i){},d183:function(t,e){const i={Login:"https://formattingclub.com/YiNuoLogin/Login",clientAdd:"https://formattingclub.com/YiNuoLogin/Customer/AddCustomer",clientProjet:"https://formattingclub.com/YiNuoLogin/Customer/SelectAllCustomer",clientFollowPerson:"https://formattingclub.com/YiNuoLogin/Customer/select_follow_person",listName:"https://formattingclub.com/YiNuoLogin/Customer/SelectStylist",list:"https://formattingclub.com/YiNuoLogin/Customer/SelectStageCustomer",stageName:"https://formattingclub.com/YiNuoLogin/Customer/SelectStageName",modify_projet:"https://formattingclub.com/YiNuoLogin/Customer/SelectCustomer",modify_stage:"https://formattingclub.com/YiNuoLogin/Customer/selectStage",projet_follow:"https://formattingclub.com/YiNuoLogin/Customer/SelectFollow",clientUndata:"https://formattingclub.com/YiNuoLogin/Customer/SelectUpdate",clientDelect:"https://formattingclub.com/YiNuoLogin/Customer/DeleteCustomer",clinetModify:"https://formattingclub.com/YiNuoLogin/Customer/UpdateCustomer",clientAddFollow:"https://formattingclub.com/YiNuoLogin/Customer/AddFollow",DesignerAdd:"https://formattingclub.com/YiNuoLogin/Customer/addCustomer_stylist",moneyProfit:"https://formattingclub.com/YiNuoLogin/fund/Select_profits",moneyModify:"https://formattingclub.com/YiNuoLogin/fund/Select_sum_details",moneyReceivable:"https://formattingclub.com/YiNuoLogin/fund/select_fund_sum",ClassSelect:"https://formattingclub.com/YiNuoLogin/fund/Select_three_fund_name",moneyAddFund:"https://formattingclub.com/YiNuoLogin/fund/Add_Fund",BankAdd:"https://formattingclub.com/YiNuoLogin/fund/AddBank",AdminAnnouncement:"https://formattingclub.com/YiNuoLogin/notice/select_notice",AnnouncementAdd:"https://formattingclub.com/YiNuoLogin/notice/addNotice",moneyRunning:"https://formattingclub.com/YiNuoLogin/fund/select_detail",bankCard:"https://formattingclub.com/YiNuoLogin/fund/select_bank",moneyTransfer:"https://formattingclub.com/YiNuoLogin/fund/add_bank_deal",moneyOutEnter:"https://formattingclub.com/YiNuoLogin/fund/Add_out_enter",selectSerch:"https://formattingclub.com/YiNuoLogin/User/Select_accounting",listProjet:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectAllCustomer",AfterSaleAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/AddCustomer",AfterStatistics:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectStageCustomer",AfterListName:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectStylist",AfterStage:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectStageName",AfterSiteDetails:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectCustomer",AfterSiteSlectStage:"https://formattingclub.com/YiNuoLogin/AfterSale/selectStage",AfterSiteFollow:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectFollow",AfterSiteUpdate:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectUpdate",AfterSiteDelete:"https://formattingclub.com/YiNuoLogin/AfterSale/DeleteCustomer",AfterUpdata:"https://formattingclub.com/YiNuoLogin/AfterSale/UpdateCustomer",AfterPerson:"https://formattingclub.com/YiNuoLogin/AfterSale/select_follow_person",AfterAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/AddFollow",projetAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/addCustomer_name",AfterlistAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/addCustomer_stylist",AfterPersonAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/Add_Follow_person",ringNingDelect:"https://formattingclub.com/YiNuoLogin/fund/Deleter_flowing",Select_fund_person:"https://formattingclub.com/YiNuoLogin/fund/Select_fund_person",Update_Customer:"https://formattingclub.com/YiNuoLogin/Customer/Update_Customer",Update_fund_detail:"https://formattingclub.com/YiNuoLogin/fund/Update_fund_detail",Update_fund_details:"https://formattingclub.com/YiNuoLogin/fund/update_fund_details",Delete_fund_detail:"https://formattingclub.com/YiNuoLogin/fund/Delete_fund_details"};t.exports=i}}]);