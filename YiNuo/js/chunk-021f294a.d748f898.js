(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-021f294a"],{6432:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"expenditure"},[n("header",{staticClass:"mui-bar mui-bar-nav"},[n("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"cash_flow"}}}),n("h1",{staticClass:"mui-title"},[t._v("支出")]),n("router-link",{staticClass:"mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"}}})],1),n("login-loading",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl_loading,expression:"imgUrl_loading"}]}),n("div",{staticClass:"mui-content one-img"},[t._m(0),n("div",{staticClass:"mui-img"},[n("div",[t._v("￥"+t._s(t.allTotal))])])]),n("v-touch",{attrs:{"swipe-options":{direction:"horizontal"}},on:{swipeleft:t.onSwipeLeft,swiperight:t.onSwipeRight}},[n("div",{staticClass:"mui-content app"},[n("form",{staticClass:"mui-input-group"},[t.site_projet?n("div",{staticClass:"mui-input-row site_projet"},[n("label",[t._v("工地名称")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.site,expression:"site"}],attrs:{type:"text",placeholder:"请选择"},domProps:{value:t.site},on:{click:t.siteChange,input:function(e){e.target.composing||(t.site=e.target.value)}}})]):t._e(),n("div",{staticClass:"mui-input-row"},[n("label",[t._v("收款人")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_person,expression:"fund_person"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入收款人"},domProps:{value:t.fund_person},on:{click:t.relecant,input:function(e){e.target.composing||(t.fund_person=e.target.value)}}})]),n("div",{staticClass:"mui-input-row"},[n("label",[t._v("类别选择")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.fund_detail_id,expression:"fund_detail_id"}],class:{select:""===t.fund_detail_id,selectBlack:""!==t.fund_detail_id},attrs:{name:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.fund_detail_id=e.target.multiple?n:n[0]},function(e){return t.fund_deId(t.fund_detail_id)}]}},[n("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.list_fund_name_type,function(e){return n("option",{domProps:{value:e.fund_name_type}},[t._v(t._s(e.fund_name_type))])})],2)]),n("div",{staticClass:"mui-input-row"},[n("label",[t._v("款项名称")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.detailed,expression:"detailed"}],class:{select:""===t.detailed,selectBlack:""!==t.detailed},attrs:{name:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.detailed=e.target.multiple?n:n[0]},function(e){return t.list_fund_nameas(t.detailed)}]}},[n("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.list_fund_names,function(e){return t.cotrProjet?n("option",{domProps:{value:e.fund_names}},[t._v(t._s(e.fund_names))]):t._e()}),t._l(t.list_fund_names,function(e){return t.idProjet?n("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_names))]):t._e()})],2)]),t.category?n("div",{staticClass:"mui-input-row"},[n("label",[t._v("款项详细")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.slim,expression:"slim"}],class:{select:""===t.slim,selectBlack:""!==t.slim},attrs:{name:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.slim=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.list_fund_name,function(e){return n("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_name))])})],2)]):t._e(),n("data-value",{model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}),n("div",{staticClass:"mui-input-row"},[n("label",[t._v("金额")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.bank_money,expression:"bank_money"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"￥"},domProps:{value:t.bank_money},on:{input:function(e){e.target.composing||(t.bank_money=e.target.value)}}})]),n("div",{staticClass:"mui-input-row"},[n("label",[t._v("备注")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.clearBei,expression:"clearBei"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入备注"},domProps:{value:t.clearBei},on:{input:function(e){e.target.composing||(t.clearBei=e.target.value)}}})]),n("div",{staticClass:"mui-input-row row-label"},[n("label",[t._v("转出账户")]),n("label",{staticStyle:{padding:"0",width:"70%"}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.mongey_bank_id,expression:"mongey_bank_id"}],class:{select:""===t.mongey_bank_id,selectBlack:""!==t.mongey_bank_id},attrs:{name:"",id:"card"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.mongey_bank_id=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.bank_card,function(e){return n("option",{domProps:{value:e.bank_id}},[n("div",[t._v(t._s(e.bank_person))]),t._v("   \n              "),n("div",[t._v(t._s(e.bank_bank))])])})],2)])])],1),n("div",{staticClass:"mui-input-row mui-checkbox mui-left checkbox"},[n("label",[t._v("转为应收")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.checkbox,expression:"checkbox"}],attrs:{name:"checkbox1",value:"转为应收",type:"checkbox"},domProps:{checked:Array.isArray(t.checkbox)?t._i(t.checkbox,"转为应收")>-1:t.checkbox},on:{change:function(e){var n=t.checkbox,i=e.target,a=!!i.checked;if(Array.isArray(n)){var o="转为应收",s=t._i(n,o);i.checked?s<0&&(t.checkbox=n.concat([o])):s>-1&&(t.checkbox=n.slice(0,s).concat(n.slice(s+1)))}else t.checkbox=a}}})]),n("div",{staticClass:"mui-input-row form-btn"},[n("button",{staticClass:"mui-btn mui-btn-blue",attrs:{type:"button"},on:{click:t.add}},[t._v("Transfers")])]),n("div",{staticClass:"mui-content all"},[n("div",{staticClass:"saving"},[t._v("储蓄卡")]),n("div",{staticClass:"all-money"},[t._v("￥"+t._s(t.chuXuKa))])]),n("table",{staticClass:"all-saving",attrs:{border:"0",cellspacing:"",cellpadding:""}},[n("tr",[n("td",{staticStyle:{width:"22%"}},[t._v("开户行")]),n("td",{staticStyle:{width:"15%"}},[t._v("户主")]),n("td",[t._v("余额")])]),t._l(t.chuXu,function(e){return n("tr",{on:{click:function(n){return t.msgCu(e.bank_bank,e.bank_person,e.number)}}},[n("td",[t._v(t._s(e.bank_bank))]),n("td",[t._v(t._s(e.bank_person))]),n("td",[t._v("￥"+t._s(e.bank_money))])])})],2),n("div",{staticClass:"mui-content all"},[n("div",{staticClass:"saving"},[t._v("信用卡")]),n("div",{staticClass:"all-money"},[t._v("￥"+t._s(t.XinYongKa))])]),n("table",{staticClass:"blaner",attrs:{border:"0",cellspacing:"",cellpadding:""}},[n("tr",[n("td",{staticStyle:{width:"21%"}},[t._v("开户行")]),n("td",{staticStyle:{width:"15%"}},[t._v("户主")]),n("td",[t._v("余额")]),n("td",[t._v("额度")])]),t._l(t.xinY,function(e){return n("tr",{on:{click:function(n){return t.msgCu(e.bank_bank,e.bank_person,e.number)}}},[n("td",[t._v(t._s(e.bank_bank))]),n("td",[t._v(t._s(e.bank_person))]),n("td",[t._v("￥"+t._s(e.bank_money))]),n("td",[t._v("￥"+t._s(e.bank_limit))])])})],2)])])],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"customer"},[n("h2",[t._v("支出")]),n("p",[t._v("/Expense")])])}],o=n("d183"),s=n.n(o),l={name:"expenditure",data(){return{imgUrl_loading:!1,category:!0,cotrProjet:!1,idProjet:!0,relevant_people:!0,site_projet:!0,dataValue:(new Date).toString(),bank_id:0,mongey_bank_id:"",list_fund_name_type:[],detailed:"",list_fund_names:[],slim:"",list_fund_name:[],listRelevant:"",site:"",bank_money:"",account:"",clearBei:"",checkbox:"",fund_person:"",fund_detail_id:"",bank_card:"",chuXu:"",xinY:"",allTotal:"",chuXuKa:"",XinYongKa:"",fund_name_id:"",list_fund_name_type:"",list_fund_names:"",list_fund_name:"",test_id:"",fund_people_name:"",list_bank_card_person:[{text:"胡永生"},{text:"邱梅"}]}},created(){this.imgUrl_loading=!0,this.axios.get(s.a.ClassSelect+"?fund_type=1&fund_stale=1").then(t=>{200===t.status&&(this.imgUrl_loading=!1,this.list_fund_name_type=t.data.fund_name_type)},t=>{var e=this;mui.alert("您无权访问",function(){e.$router.push({name:"index"})})}),this.axios.get(s.a.bankCard).then(t=>{this.bank_card=t.data;var e=[],n=[],i=0,a=0,o=0;for(var s in t.data)"储蓄卡"===t.data[s].bank_type?(i+=t.data[s].bank_money,e.push(t.data[s])):"信用卡"===t.data[s].bank_type&&(t.data[s].bank_money>0&&(a+=t.data[s].bank_money),n.push(t.data[s]));this.chuXu=e,this.xinY=n,this.chuXuKa=Math.floor(100*i)/100,this.XinYongKa=Math.floor(100*a)/100,o+=this.chuXuKa+this.XinYongKa,this.allTotal=Math.floor(100*o)/100},t=>{var e=this;mui.alert("您无权访问",function(){e.$router.push({name:"index"})})}),this.site=window.test,this.test_id=window.test_id,this.fund_person=window.fund_people,this.fund_people_name=window.fund_people_name},methods:{fund_deId(t){this.fund_nameso=t,this.axios.get(s.a.ClassSelect+"?fund_type=1&fund_stale=1&fund_name_type="+this.fund_nameso).then(t=>{this.list_fund_name_type=t.data.fund_name_type,this.list_fund_names=t.data.fund_names,this.list_fund_name=t.data.fund_name,"个人"===this.fund_detail_id?(this.category=!1,this.site_projet=!1,this.relevant_people=!0):"公司"===this.fund_detail_id&&(this.category=!0,this.cotrProjet=!0,this.idProjet=!1,this.relevant_people=!1,this.site_projet=!0)},t=>{var e=this;mui.alert("您无权访问",function(){e.$router.push({name:"index"})})})},list_fund_nameas(t){this.fund_name_id=t,this.axios.get(s.a.ClassSelect+"?fund_type=1&fund_stale=1&fund_name_type="+this.fund_nameso+"&fund_names="+t).then(t=>{this.list_fund_name_type=t.data.fund_name_type,this.list_fund_names=t.data.fund_names,this.list_fund_name=t.data.fund_name,"现金周转"===this.detailed?(this.site_projet=!1,this.relevant_people=!0):"工程"===this.detailed&&(this.site_projet=!0,this.relevant_people=!1)},t=>{var e=this;mui.alert("您无权访问",function(){e.$router.push({name:"index"})})})},onSwipeLeft:function(){this.$router.push({name:"income"})},onSwipeRight:function(){this.$router.push({name:"transfer_money"})},siteChange(){var t="transfer_money";this.$router.push({path:"siteList"}),window.expenditure=t},relecant(){var t="expenditure_people";this.$router.push({path:"relevant_people"}),window.prosen=t},msgCu(t,e,n){var i="?&bank_person="+e+"&bank_bank="+t;void 0!==n&&(i+="&bank_number="+n);var a="transfer";this.axios.get(s.a.moneyRunning+i).then(t=>{window.transfer=t.data.list_moey,this.$router.push({path:"running_money",query:{transfer:a}})})},add(){var t=this,e=/^\d+(\.\d+)?$/,n="?";if(""==this.fund_detail_id)return mui.toast("类别名称不能为空"),!1,!1;if(void 0!==this.site&&void 0!==this.test_id&&(n+="customer_id="+this.test_id),void 0!==this.fund_person&&void 0!==this.fund_people_name&&(n+="&fund_person="+this.fund_people_name),"个人"===this.fund_detail_id?n+="fund_name="+this.detailed:"公司"===this.fund_detail_id&&(n+="&fund_name="+this.slim),""==this.bank_money)return mui.toast("金额不能为空"),!1,!1;if(!e.test(this.bank_money))return mui.toast("金额格式错误"),!1,!1;if(""==this.bank_deal_rate)return mui.toast("转账费率不能为空"),!1,!1;if(""==this.mongey_bank_id)return mui.toast("转出不能为空"),!1,!1;var i=new Date(this.dataValue),a=i.getFullYear(),o=i.getMonth()+1,l=i.getDate(),u=i.getHours(),r=i.getMinutes(),d=i.getSeconds(),c=`${a}-${o}-${l} ${u}:${r}:${d}`;this.imgUrl_loading=!0,n+="&money="+-this.bank_money+"&fund_text="+this.clearBei+"&bank_id="+this.mongey_bank_id+"&shiji_money="+-this.bank_money+"&date="+c,!0===this.checkbox?this.axios.post(s.a.moneyOutEnter+n).then(e=>{for(var n in this.listProjet)this.listProjet[n].customer_id===this.site&&this.listProjet[n].customer_name;200===e.status&&(this.imgUrl_loading=!1,mui.alert(e.data.data,function(){t.$router.push({name:"expenditure_receive",query:{money:t.bank_money}})}))}):this.axios.post(s.a.moneyOutEnter+n).then(e=>{200===e.status&&(this.imgUrl_loading=!1,"录入成功"===e.data.data&&mui.alert("录入成功",function(){t.$router.go(0)}))})}}},u=l,r=(n("c64f"),n("2877")),d=Object(r["a"])(u,i,a,!1,null,"bc836e8a",null);e["default"]=d.exports},a138:function(t,e,n){},c64f:function(t,e,n){"use strict";var i=n("a138"),a=n.n(i);a.a},d183:function(t,e){const n={Login:"https://formattingclub.com/YiNuoLogin/Login",clientAdd:"https://formattingclub.com/YiNuoLogin/Customer/AddCustomer",clientProjet:"https://formattingclub.com/YiNuoLogin/Customer/SelectAllCustomer",clientFollowPerson:"https://formattingclub.com/YiNuoLogin/Customer/select_follow_person",listName:"https://formattingclub.com/YiNuoLogin/Customer/SelectStylist",list:"https://formattingclub.com/YiNuoLogin/Customer/SelectStageCustomer",modify_projet:"https://formattingclub.com/YiNuoLogin/Customer/SelectCustomer",modify_stage:"https://formattingclub.com/YiNuoLogin/Customer/selectStage",projet_follow:"https://formattingclub.com/YiNuoLogin/Customer/SelectFollow",clientUndata:"https://formattingclub.com/YiNuoLogin/Customer/SelectUpdate",clientDelect:"https://formattingclub.com/YiNuoLogin/Customer/DeleteCustomer",clinetModify:"https://formattingclub.com/YiNuoLogin/Customer/UpdateCustomer",clientAddFollow:"https://formattingclub.com/YiNuoLogin/Customer/AddFollow",DesignerAdd:"https://formattingclub.com/YiNuoLogin/Customer/addCustomer_stylist",moneyProfit:"https://formattingclub.com/YiNuoLogin/fund/Select_profits",moneyModify:"https://formattingclub.com/YiNuoLogin/fund/Select_sum_details",moneyReceivable:"https://formattingclub.com/YiNuoLogin/fund/select_fund_sum",ClassSelect:"https://formattingclub.com/YiNuoLogin/fund/Select_three_fund_name",moneyAddFund:"https://formattingclub.com/YiNuoLogin/fund/Add_Fund",BankAdd:"https://formattingclub.com/YiNuoLogin/fund/AddBank",AdminAnnouncement:"https://formattingclub.com/YiNuoLogin/notice/select_notice",AnnouncementAdd:"https://formattingclub.com/YiNuoLogin/notice/addNotice",moneyRunning:"https://formattingclub.com/YiNuoLogin/fund/select_detail",bankCard:"https://formattingclub.com/YiNuoLogin/fund/select_bank",moneyTransfer:"https://formattingclub.com/YiNuoLogin/fund/add_bank_deal",moneyOutEnter:"https://formattingclub.com/YiNuoLogin/fund/Add_out_enter",selectSerch:"https://formattingclub.com/YiNuoLogin/User/Select_accounting",listProjet:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectAllCustomer",AfterSaleAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/AddCustomer",AfterStatistics:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectStageCustomer",AfterListName:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectStylist",AfterStage:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectStageName",AfterSiteDetails:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectCustomer",AfterSiteSlectStage:"https://formattingclub.com/YiNuoLogin/AfterSale/selectStage",AfterSiteFollow:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectFollow",AfterSiteUpdate:"https://formattingclub.com/YiNuoLogin/AfterSale/SelectUpdate",AfterSiteDelete:"https://formattingclub.com/YiNuoLogin/AfterSale/DeleteCustomer",AfterUpdata:"https://formattingclub.com/YiNuoLogin/AfterSale/UpdateCustomer",AfterUpdata:"https://formattingclub.com/YiNuoLogin/AfterSale/UpdateCustomer",AfterPerson:"https://formattingclub.com/YiNuoLogin/AfterSale/select_follow_person",AfterAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/AddFollow",projetAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/addCustomer_name",AfterlistAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/addCustomer_stylist",AfterPersonAdd:"https://formattingclub.com/YiNuoLogin/AfterSale/Add_Follow_person",ringNingDelect:"https://formattingclub.com/YiNuoLogin/fund/Deleter_flowing",Select_fund_person:"https://formattingclub.com/YiNuoLogin/fund/Select_fund_person",Update_Customer:"https://formattingclub.com/YiNuoLogin/Customer/Update_Customer",Update_fund_detail:"https://formattingclub.com/YiNuoLogin/fund/Update_fund_detail",Update_fund_details:"https://formattingclub.com/YiNuoLogin/fund/update_fund_details",Delete_fund_detail:"https://formattingclub.com/YiNuoLogin/fund/Delete_fund_details",money_search:"https://formattingclub.com/YiNuoLogin/fund/Select_fund_name_money",money_refund:"https://formattingclub.com/YiNuoLogin/fund/money_refund",newUserName:"https://formattingclub.com/YiNuoLogin/User/Add_User",add_customer_person_fund:"https://formattingclub.com/YiNuoLogin/fund/add_customer_person_fund"};t.exports=n}}]);