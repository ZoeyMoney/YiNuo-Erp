(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-345ca400"],{2792:function(t,a,e){"use strict";var s=e("66c9"),i=e.n(s);i.a},"66c9":function(t,a,e){},a4f4:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"admin_log"},[e("header",{staticClass:"mui-bar mui-bar-nav"},[e("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"log_admin"}}}),e("h1",{staticClass:"mui-title"},[t._v("工作日志")]),e("router-link",{staticClass:"mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"}}})],1),t._m(0),e("div",{staticClass:"mui-content app"},[t._l(t.text,function(a,s){return 0==s?e("el-card",{key:s,staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(a.date))])]),e("div",{staticClass:"text item"},[t._v("\n        "+t._s(t.reol(a.plan_text))+"\n      ")]),e("div",{staticClass:"text-input"},[e("el-input",{attrs:{type:"textarea",rows:5,placeholder:"完成情况","show-word-limit":!0,disabled:t.addfo},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}}),e("span",{staticClass:"allnuber"},[t._v("字数："),e("b",{class:{reds:t.ass,grends:t.asr}},[t._v(t._s(t.goaddinfo)+"\n          "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.info,expression:"info"}],staticClass:"el-icon-close"}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.infos,expression:"infos"}],staticClass:"el-icon-check"})])])],1)]):t._e()}),t.text.length>0?e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.datessd))])]),t._l(t.items,function(a,s){return e("div",{key:s,staticClass:"text item"},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:a.text,callback:function(e){t.$set(a,"text",e)},expression:"item.text"}})],1)}),e("span",{staticClass:"allnuber"},[t._v("字数："),e("b",{class:{reds:t.all,grends:t.alls}},[t._v(t._s(t.allnubel)+"\n         "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.allinfo,expression:"allinfo"}],staticClass:"el-icon-close"}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.allinfos,expression:"allinfos"}],staticClass:"el-icon-check"})])]),e("el-link",{attrs:{type:"primary"},on:{click:t.addGo}},[t._v("新增一行")])],2):t._e(),0==t.text.length?e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.datass))])]),e("div",{staticClass:"text item"},[e("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入明日计划",maxlength:150,minlength:50,"show-word-limit":!0,disabled:t.fasl},model:{value:t.textareaval,callback:function(a){t.textareaval=a},expression:"textareaval"}})],1)]):t._e(),e("div",{staticClass:"form-botton"},[e("button",{staticClass:"mui-btn mui-btn-black",attrs:{type:"button"},on:{click:t.add}},[t._v("提交")])])],2)])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mui-content one-img"},[e("div",{staticClass:"customer"},[e("h2",[t._v("工作日志")]),e("p",[t._v("/projet log")])])])}],l={name:"admin_log",data(){return{text:"",today:"",today_data:"",tomorrow:"",tomorrow_data:"",tomorrow_dates:"",Yesterday:"",textarea:"",items:[{text:"1："}],cont:1,info:!0,infos:!1,ass:!0,asr:!1,all:!0,alls:!1,dates:"",textareaval:"",fasl:!1,addfo:!1,allinfo:!0,allinfos:!1,over:"",datas_s:"",datass:"",datessd:""}},methods:{addGo(){this.cont++;var t={text:""};t.text=this.cont+"：",this.items.push(t)},add(){var t=this,a="",e=new Date,s=(e.getFullYear(),e.getMonth()+1);s<10&&(s="0"+s);var i=e.getDate();i<10&&(i="0"+i);e.getHours(),e.getMinutes(),e.getSeconds();if("0"==this.text.length){if(this.textareaval.length<"50")return mui.toast("汇报内容不能低于50字"),!1,!1;var l="?plan_text="+this.textareaval;this.axios.post("/Administration/Add_Plan"+l).then(a=>{200===a.status&&mui.alert("提交成功",function(){t.$router.go(0)})})}else if("0"!=this.text.length){if(a=this.text[0].plan_id,this.textarea.length<"30")return mui.toast("完成情况不能低于30字"),!1,!1;var n="?plan_over="+this.textarea+"&plan_id="+a;this.imgUrl_loading=!0,this.axios.post("/Administration/Update_Plan"+n).then(a=>{200===a.status&&(this.imgUrl_loading=!1,mui.alert("汇报完成",function(){t.$router.go(0)}))});var r=0;for(var o in this.items)r+=this.items[o].text.length;if(r<80)return mui.toast("汇报内容不能低于80字"),!1,!1;var h="";for(var o in this.items)"。"==this.items[o].text.charAt(this.items[o].text.length-1)||"."==this.items[o].text.charAt(this.items[o].text.length-1)?h+=this.items[o].text:h+=this.items[o].text+"。";l="?plan_text="+h;this.axios.post("/Administration/Add_Plan"+l).then(a=>{200===a.status&&mui.alert("提交成功",function(){t.$router.go(0)})})}},search_text(){this.axios.get("/Administration/Select_Plan").then(t=>{for(var a in this.text=t.data.data,this.text);""!=this.text[0].plan_over&&(this.textarea=this.text[0].plan_over);var e="",s="",i=new Date,l=i.getFullYear(),n=i.getMonth()+1;n<10&&(n="0"+n);var r=i.getDate();r<10&&(r="0"+r);i.getHours(),i.getMinutes(),i.getSeconds();var o=l+"-"+n+"-"+r;this.dates=o;for(var a in this.text){e=this.text[a].date.split(" ")[0],o==e?(this.today=this.text[a].plan_text,this.today_data=e,void 0!=this.text[a].plan_over&&(this.over=this.text[a].plan_over)):o<e&&(this.tomorrow_data=e,this.tomorrow=this.text[a].plan_text,void 0!=this.text[a].plan_over&&(this.over=this.text[a].plan_over));s=this.text[a.length-1].date.split(" ")[0];if(""==this.tomorrow_data){var h=new Date(s),d=h.getFullYear(),c=h.getMonth()+1;c<10&&(c="0"+c);var u=h.getDate()+1;u<10&&(u="0"+u),this.tomorrow_data=d+"-"+c+"-"+u}}if(this.dates<s?this.addfo=!0:this.addfo=!1,this.fasl=o<s,"0"!=t.data.data.length){var v=new Date(t.data.data[0].date),x=v.getFullYear(),m=v.getMonth()+1;m<10&&(m="0"+m);o=v.getDate()+1;o<10&&(o="0"+o),this.datas_s="请输入"+x+"-"+m+"-"+o+"计划",this.datessd=x+"-"+m+"-"+o}})},reol(t){return t.replace(/。/g,"\n")}},created(){this.search_text();var t=new Date,a=t.getFullYear(),e=t.getMonth()+1;e<10&&(e="0"+e);var s=t.getDate()+1;s<10&&(s="0"+s),this.datass=a+"-"+e+"-"+s},computed:{allnubel(){var t=0;for(var a in this.items)t+=this.items[a].text.length;return t>=80?(this.all=!1,this.alls=!0,this.allinfo=!1,this.allinfos=!0):(this.all=!0,this.alls=!1,this.allinfo=!0,this.allinfos=!1),t},goaddinfo(){var t=0;return void 0!=this.textarea&&(t+=this.textarea.length),t>=30?(this.ass=!1,this.asr=!0,this.info=!1,this.infos=!0):(this.ass=!0,this.asr=!1,this.info=!0,this.infos=!1),t}}},n=l,r=(e("2792"),e("2877")),o=Object(r["a"])(n,s,i,!1,null,"e1fb657a",null);a["default"]=o.exports}}]);