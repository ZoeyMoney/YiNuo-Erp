(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11c641ae"],{a4f4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin_log"},[a("header",{staticClass:"mui-bar mui-bar-nav"},[a("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"log_admin"}}}),a("h1",{staticClass:"mui-title"},[t._v("工作日志")]),a("router-link",{staticClass:"mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"}}})],1),t._m(0),a("div",{staticClass:"mui-content app"},[t._l(t.text,function(e,s){return 0==s?a("el-card",{key:s,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.date))])]),a("div",{staticClass:"text item"},[t._v("\n            "+t._s(t.reol(e.plan_text))+"\n          ")]),a("div",{staticClass:"text-input"},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"完成情况",maxlength:150,minlength:50,"show-word-limit":!0,disabled:t.addfo},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)]):t._e()}),t.text.length>0?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.datessd))])]),t._l(t.items,function(e,s){return a("div",{key:s,staticClass:"text item"},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item.text"}})],1)}),a("el-link",{attrs:{type:"primary"},on:{click:t.addGo}},[t._v("新增一行")])],2):t._e(),0==t.text.length?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.datass))])]),a("div",{staticClass:"text item"},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入明日计划",maxlength:150,minlength:50,"show-word-limit":!0,disabled:t.fasl},model:{value:t.textareaval,callback:function(e){t.textareaval=e},expression:"textareaval"}})],1)]):t._e(),a("div",{staticClass:"form-botton"},[a("button",{staticClass:"mui-btn mui-btn-black",attrs:{type:"button"},on:{click:t.add}},[t._v("提交")])])],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-content one-img"},[a("div",{staticClass:"customer"},[a("h2",[t._v("工作日志")]),a("p",[t._v("/projet log")])])])}],r={name:"admin_log",data(){return{text:"",today:"",today_data:"",tomorrow:"",tomorrow_data:"",tomorrow_dates:"",Yesterday:"",textarea:"",items:[{text:"1："}],cont:1,dates:"",textareaval:"",fasl:!1,addfo:!1,over:"",datas_s:"",datass:"",datessd:""}},methods:{addGo(){this.cont++;var t={text:""};t.text=this.cont+"：",this.items.push(t)},add(){var t=this,e="",a=new Date,s=(a.getFullYear(),a.getMonth()+1);s<10&&(s="0"+s);var i=a.getDate();i<10&&(i="0"+i);a.getHours(),a.getMinutes(),a.getSeconds();if("0"==this.text.length){if(this.textareaval.length<"50")return mui.toast("汇报内容不能低于50字"),!1,!1;var r="?plan_text="+this.textareaval;this.axios.post("/Administration/Add_Plan"+r).then(e=>{200===e.status&&mui.alert("提交成功",function(){t.$router.go(0)})})}else if("0"!=this.text.length){if(e=this.text[0].plan_id,this.textarea.length<"30")return mui.toast("完成情况不能低于30字"),!1,!1;var n="?plan_over="+this.textarea+"&plan_id="+e;this.imgUrl_loading=!0,this.axios.post("/Administration/Update_Plan"+n).then(e=>{200===e.status&&(this.imgUrl_loading=!1,mui.alert("汇报完成",function(){t.$router.go(0)}))});var o=0;for(var l in this.items)o+=this.items[l].text.length;if(o<80)return mui.toast("汇报内容不能低于80字"),!1,!1;var d="";for(var l in this.items)"。"==this.items[l].text.charAt(this.items[l].text.length-1)||"."==this.items[l].text.charAt(this.items[l].text.length-1)?d+=this.items[l].text:d+=this.items[l].text+"。";console.log(d);r="?plan_text="+d;this.axios.post("/Administration/Add_Plan"+r).then(e=>{200===e.status&&mui.alert("提交成功",function(){t.$router.go(0)})})}},search_text(){this.axios.get("/Administration/Select_Plan").then(t=>{for(var e in this.text=t.data.data,this.text);""!=this.text[0].plan_over&&(this.textarea=this.text[0].plan_over);var a="",s="",i=new Date,r=i.getFullYear(),n=i.getMonth()+1;n<10&&(n="0"+n);var o=i.getDate();o<10&&(o="0"+o);i.getHours(),i.getMinutes(),i.getSeconds();var l=r+"-"+n+"-"+o;this.dates=l;for(var e in this.text){a=this.text[e].date.split(" ")[0],l==a?(this.today=this.text[e].plan_text,this.today_data=a,void 0!=this.text[e].plan_over&&(this.over=this.text[e].plan_over)):l<a&&(this.tomorrow_data=a,this.tomorrow=this.text[e].plan_text,void 0!=this.text[e].plan_over&&(this.over=this.text[e].plan_over));s=this.text[e.length-1].date.split(" ")[0];if(""==this.tomorrow_data){var d=new Date(s),h=d.getFullYear(),c=d.getMonth()+1;c<10&&(c="0"+c);var u=d.getDate()+1;u<10&&(u="0"+u),this.tomorrow_data=h+"-"+c+"-"+u}}if(this.dates<s?this.addfo=!0:this.addfo=!1,this.fasl=l<s,"0"!=t.data.data.length){var x=new Date(t.data.data[0].date),m=x.getFullYear(),v=x.getMonth()+1;v<10&&(v="0"+v);l=x.getDate()+1;l<10&&(l="0"+l),this.datas_s="请输入"+m+"-"+v+"-"+l+"计划",this.datessd=m+"-"+v+"-"+l}})},reol(t){return t.replace(/。/g,"\n")}},created(){this.search_text();var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a<10&&(a="0"+a);var s=t.getDate()+1;s<10&&(s="0"+s),this.datass=e+"-"+a+"-"+s}},n=r,o=(a("e357"),a("2877")),l=Object(o["a"])(n,s,i,!1,null,"162d29fa",null);e["default"]=l.exports},d7be:function(t,e,a){},e357:function(t,e,a){"use strict";var s=a("d7be"),i=a.n(s);i.a}}]);