(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13cf16aa"],{"02c7":function(t,e,a){"use strict";var n=a("4f20"),i=a.n(n);i.a},"4f20":function(t,e,a){},"9d6d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"expenditure_receive"},[a("header",{staticClass:"mui-bar mui-bar-nav"},[a("router-link",{staticClass:"mui-icon mui-icon-left-nav mui-pull-left",attrs:{to:{name:"expenditure"}}}),a("h1",{staticClass:"mui-title"},[t._v("转为应收")]),a("router-link",{staticClass:"mui-icon mui-icon mui-icon-home mui-pull-right",attrs:{to:{name:"index"}}})],1),t._m(0),a("div",{staticClass:"mui-content app"},[a("form",{staticClass:"mui-input-group"},[a("div",{staticClass:"mui-input-row"},[a("label",[t._v("类别选择")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.fund_detail_id,expression:"fund_detail_id"}],attrs:{name:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.fund_detail_id=e.target.multiple?a:a[0]},function(e){return t.fund_deId(t.fund_detail_id)}]}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.list_fund_name_type,function(e){return a("option",{domProps:{value:e.fund_name_type}},[t._v(t._s(e.fund_name_type))])})],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("款项名称")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.detailed,expression:"detailed"}],attrs:{name:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.detailed=e.target.multiple?a:a[0]},function(e){return t.list_fund_nameas(t.detailed)}]}},[a("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.list_fund_names,function(e){return t.cotrProjet?a("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_names))]):t._e()}),t._l(t.list_fund_names,function(e){return t.idProjet?a("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_names))]):t._e()})],2)]),t.category?a("div",{staticClass:"mui-input-row"},[a("label",[t._v("款项详细")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.slim,expression:"slim"}],attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.slim=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",selected:"selected"}},[t._v("请选择")]),t._l(t.list_fund_name,function(e){return a("option",{domProps:{value:e.fund_name_id}},[t._v(t._s(e.fund_name))])})],2)]):t._e(),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("项目名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入总金额",disabled:"disabled"},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}})]),a("div",{ref:"no",staticClass:"mui-input-row"},[a("label",[t._v("相关人")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nameo,expression:"nameo"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入债务人"},domProps:{value:t.nameo},on:{input:function(e){e.target.composing||(t.nameo=e.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("总金额")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.moneys,expression:"moneys"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入总金额"},domProps:{value:t.moneys},on:{input:function(e){e.target.composing||(t.moneys=e.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("手续费")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.money_rate,expression:"money_rate"}],attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.money_rate=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._l(t.list_money_rate,function(e){return a("option",{domProps:{value:e.text}},[t._v(t._s(e.text)+"%")])})],2)]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("实际应收")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.money_actual,expression:"money_actual"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:t.money_actual},on:{input:function(e){e.target.composing||(t.money_actual=e.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("备注")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_text,expression:"fund_text"}],staticClass:"mui-input-clear",attrs:{type:"text",placeholder:"备注"},domProps:{value:t.fund_text},on:{input:function(e){e.target.composing||(t.fund_text=e.target.value)}}})]),a("div",{staticClass:"mui-input-row input-radio"},[a("div",{staticClass:"mui-input-row mui-left mui-radio"},[a("label",[t._v("阶段付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_type,expression:"fund_type"}],attrs:{type:"radio",value:"阶段付款"},domProps:{checked:t._q(t.fund_type,"阶段付款")},on:{click:t.stage_one,change:function(e){t.fund_type="阶段付款"}}})]),a("div",{staticClass:"mui-input-row mui-left mui-radio"},[a("label",[t._v("周期付款")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fund_type,expression:"fund_type"}],attrs:{type:"radio",value:"周期付款"},domProps:{checked:t._q(t.fund_type,"周期付款")},on:{click:t.week,change:function(e){t.fund_type="周期付款"}}})])]),a("table",{staticClass:"table-all",attrs:{border:"0",id:"table"}},[t._m(1),t._l(t.list,function(e){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_date,expression:"item.fund_details_date"}],attrs:{type:"date",id:"fund_details_date"},domProps:{value:e.fund_details_date},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_date",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_money,expression:"item.fund_details_money"}],attrs:{type:"text",id:"fund_details_money",placeholder:"金额"},domProps:{value:e.fund_details_money},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_money",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_batch,expression:"item.fund_details_batch"}],attrs:{type:"text",id:"fund_details_batch",placeholder:"批次"},domProps:{value:e.fund_details_batch},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_batch",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fund_details_text,expression:"item.fund_details_text"}],attrs:{type:"text",id:"fund_details_text",placeholder:"备注"},domProps:{value:e.fund_details_text},on:{input:function(a){a.target.composing||t.$set(e,"fund_details_text",a.target.value)}}})])])})],2)]),a("div",{staticClass:"mui-content data-time",attrs:{id:"data-time"}},[a("form",{staticClass:"mui-input-group"},[a("div",{staticClass:"mui-input-row"},[a("label",[t._v("还款时间")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data_huan,expression:"data_huan"}],staticClass:"mui-input-clear",attrs:{type:"date",id:"data_huan"},domProps:{value:t.data_huan},on:{input:function(e){e.target.composing||(t.data_huan=e.target.value)}}})]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("还款周期")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.yue,expression:"yue"}],attrs:{name:"",id:"yue"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.yue=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),a("option",{attrs:{value:"按月"}},[t._v("按月")]),a("option",{attrs:{value:"按年"}},[t._v("按年")]),a("option",{attrs:{value:"按周"}},[t._v("按周")])])]),a("div",{staticClass:"mui-input-row"},[a("label",[t._v("还款期数")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.qi,expression:"qi"}],staticClass:"mui-input-clear",attrs:{type:"text",id:"qi",placeholder:"请填入期数"},domProps:{value:t.qi},on:{input:function(e){e.target.composing||(t.qi=e.target.value)}}})])])]),a("p",{attrs:{id:"btn-form"},on:{click:t.formAdd}},[t._v("添加新一行")]),a("div",{staticClass:"mui-input-row form-btn"},[a("button",{staticClass:"mui-btn mui-btn-blue",attrs:{type:"button",id:"btn"},on:{click:t.add}},[t._v("保存")])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mui-content"},[a("div",{staticClass:"customer"},[a("h2",[t._v("转为应收")]),a("p",[t._v("/expenditur receive")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("日期")]),a("th",[t._v("金额")]),a("th",[t._v("批次")]),a("th",[t._v("备注")])])}],u=(a("6b54"),a("28a5"),{name:"expenditure_receive",data:function(){return{category:!0,cotrProjet:!1,idProjet:!0,fund_type:"阶段付款",fund_detail_id:"",detailed:"",id:"",fund_nameo:"",fund_text:"",list_fund_name_type:"",slim:"",list_fund_namea:"",list_fund_name:"",customer_name:"",list_customer_name:"",list_fund_names:"",data_huan:"",projet:"",yue:"",qi:"",fund_details_id:"",nameo:"",moneys:"",list:[{fund_details_date:"",fund_details_money:"",fund_details_batch:"",fund_details_text:""}]}},created:function(){var t=this,e=location.href,a=e.length,n=e.indexOf("="),i=decodeURI(e.substr(n+1,a-n));this.fund_details_id=i,this.lista=i.split("=");var u=[];for(var s in this.lista){var d=this.lista[s].indexOf("&"),o=this.lista[s].slice(0,d);u.push(o)}this.id=u[0],this.nameo=u[1],this.moneys=u[2],this.fund_text=u[3],this.axios.get("https://formattingclub.com/YiNuoLogin/Customer/SelectStageCustomer").then(function(e){t.projet=e.data}),this.axios.get("https://formattingclub.com/YiNuoLogin/fund/Select_three_fund_name?fund_type=1").then(function(e){t.list_fund_name_type=e.data.fund_name_type},function(e){var a=t;mui.alert("您无权访问",function(){a.$router.push({name:"index"})})})},methods:{fund_deId:function(t){var e=this;this.fund_nameso=t,this.axios.get("https://formattingclub.com/YiNuoLogin/fund/Select_three_fund_name?fund_type=1&fund_name_type="+this.fund_nameso).then(function(t){e.list_fund_name_type=t.data.fund_name_type,e.list_fund_names=t.data.fund_names,e.list_fund_name=t.data.fund_name,"个人"===e.fund_detail_id?(e.category=!1,e.site_projet=!1,e.relevant_people=!0):"公司"===e.fund_detail_id&&(e.category=!0,e.cotrProjet=!0,e.idProjet=!1,e.relevant_people=!1,e.site_projet=!0)},function(t){var a=e;mui.alert("您无权访问",function(){a.$router.push({name:"index"})})})},list_fund_nameas:function(t){var e=this;this.fund_name=t,this.axios.get("https://formattingclub.com/YiNuoLogin/fund/Select_three_fund_name?fund_type=1&fund_name_type="+this.fund_nameso+"&fund_names="+t).then(function(t){e.list_fund_name_type=t.data.fund_name_type,e.list_fund_names=t.data.fund_names,e.list_fund_name=t.data.fund_name,"现金周转"===e.detailed?(e.site_projet=!1,e.relevant_people=!0):"工程"===e.detailed?(e.relevant_people=!1,e.site_projet=!0):"营业费"===e.detailed&&(e.relevant_people=!0,e.site_projet=!1)},function(t){var a=e;mui.alert("您无权访问",function(){a.$router.push({name:"index"})})})},stage_one:function(){var t=document.getElementById("table"),e=document.getElementById("data-time"),a=document.getElementById("btn-form");a.style.display="block",t.style.display="block",e.style.display="none"},week:function(){var t=document.getElementById("table"),e=document.getElementById("data-time"),a=document.getElementById("btn-form");t.style.display="none",a.style.display="none",e.style.display="block"},formAdd:function(){var t={fund_details_date:"",fund_details_money:"",fund_details_batch:"",fund_details_text:""};this.list.push(t)},add:function(){var t=this,e=/^[0-9]*$/;if(""==this.moneys)return mui.toast("总金额不能为空"),!1,!1;if(!e.test(this.moneys))return mui.toast("总金额只能填入数字"),!1,!1;if(""==this.fund_text)return mui.toast("备注不能为空"),!1,!1;if("阶段付款"===this.fund_type){var a=document.getElementById("fund_details_money").value,n=document.getElementById("fund_details_batch").value;if(""==a)return mui.toast("金额不能为空"),!1,!1;if(!e.test(a))return mui.toast("金额只能填入数字"),!1,!1;if(""==n)return mui.toast("批次不能为空"),!1,!1;if(!e.test(n))return mui.toast("批次只能填入数字"),!1,!1;var i=0;for(var u in this.list){var s=this.list[u].fund_details_money;i+=parseInt(s)}if(!(this.moneys>=i))return mui.toast("金额的和不能大于总金额"),!1,!1;var d=0;for(var u in this.list)d+=parseInt(this.list[u].fund_details_money);if(this.moneys!=d)return mui.alert("总金额与阶段金额总和不同"),!1,!1}else if("周期付款"===this.fund_type){var o=document.getElementById("qi").value,l=document.getElementById("yue").value,r=document.getElementById("data_huan").value;if(""==r)return mui.toast("还款时间不能为空"),!1,!1;if(""==l)return mui.toast("还款周期不能为空"),!1,!1;if(""==o)return mui.toast("还款期数不能为空"),!1,!1;if(!e.test(o))return mui.toast("还款期数只能填入数字"),!1,!1}r=new Date(this.data_huan);var m=this.yue,_=this.qi,c=this.fund_money/_,f="";if("周期付款"===this.fund_type)if(this.list=[],"按月"===m)for(var p=1;p<=_;p++){var v=r.getMonth()+1+p;f=r.getFullYear()+"-"+v+"-"+r.getDate();var h={fund_details_date:f,fund_details_money:c.toString(),fund_details_batch:p.toString(),fund_details_text:""};this.list.push(h)}else if("按年"===m)for(p=1;p<=_;p++){var y=r.getFullYear()+p;f=y+"-"+r.getMonth()+"-"+r.getDate();h={fund_details_date:f,fund_details_money:c.toString(),fund_details_batch:p.toString(),fund_details_text:""};this.list.push(h)}else if("按周"===m)for(p=1;p<=_;p++){v=r.getMonth()+1;r.setDate(r.getDate()+7),f=r.getFullYear()+"-"+v+"-"+r.getDate();h={fund_details_date:f,fund_details_money:c.toString(),fund_details_batch:p.toString(),fund_details_text:""};this.list.push(h)}var g="";""===this.id?g+="0":g=g+=this.id,this.axios({method:"POST",url:"https://formattingclub.com/YiNuoLogin/fund/Add_Fund",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:{listFund:JSON.stringify(this.list),fund_customer_id:g,fund_workyard_pact_id:1,fund_debtor:this.nameo,fund_name:this.detailed,fund_money:this.moneys,fund_person:5,fund_text:this.fund_text,fund_type:this.fund_type},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}]}).then(function(e){mui.alert(e.data,function(){t.$router.push({path:"expenditure"})})})}}}),s=u,d=(a("02c7"),a("2877")),o=Object(d["a"])(s,n,i,!1,null,"4fd89667",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-13cf16aa.4123ace1.js.map